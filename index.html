<!DOCTYPE html>
<html>
<head>
  <title>Focus Monitor ðŸŽ¯</title>
  <style>
    body {
      text-align:center;
      background:#111;
      color:white;
      font-family:Arial;
    }
    video {
      border:4px solid lime;
      margin-top:20px;
    }
  </style>
</head>

<body>

<h1>Focus Monitor ðŸŽ¯</h1>
<p id="status">Starting camera...</p>
<video id="video" width="640" height="480" autoplay muted></video>

<script>
const video = document.getElementById("video");
const status = document.getElementById("status");

let alarmPlaying = false;
let audio;

// Start webcam
navigator.mediaDevices.getUserMedia({ video:true })
.then(stream => {
  video.srcObject = stream;
  status.innerText = "Camera active âœ… Stay focused!";
})
.catch(() => {
  status.innerText = "Camera permission denied âŒ";
});

// Continuous alarm
function startAlarm(){
  if(!alarmPlaying){
    audio = new Audio("https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg");
    audio.loop = true;
    audio.volume = 1.0;
    audio.play();
    alarmPlaying = true;
  }
}

function stopAlarm(){
  if(audio){
    audio.pause();
    audio.currentTime = 0;
  }
  alarmPlaying = false;
}

// Detect if tab inactive
setInterval(() => {
  if(document.hidden){
    status.innerText = "Focus on study! ðŸ˜¡";
    status.style.color = "red";
    startAlarm();
  } else {
    status.innerText = "Focused ðŸ˜Š";
    status.style.color = "lime";
    stopAlarm();
  }
}, 2000);

// Extra: detect mouse inactivity (looking away)
let lastMove = Date.now();

document.addEventListener("mousemove", () => {
  lastMove = Date.now();
});

setInterval(() => {
  if(Date.now() - lastMove > 8000){
    startAlarm();
    status.innerText = "Look at screen! ðŸ˜¡";
  }
}, 2000);
</script>
</body>
</html>
