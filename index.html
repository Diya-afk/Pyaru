<!DOCTYPE html>
<html>
<head>
  <title>Focus Monitor ðŸŽ¯</title>
  <script defer src="https://cdn.jsdelivr.net/npm/face-api.js"></script>
  <style>
    body {
      text-align: center;
      background: #111;
      color: white;
      font-family: Arial;
    }
    video {
      border: 4px solid lime;
      margin-top: 20px;
    }
  </style>
</head>

<body>
  <h1>Focus Monitor ðŸŽ¯</h1>
  <p id="status">Loading models...</p>
  <video id="video" width="640" height="480" autoplay muted></video>

<script>
const video = document.getElementById("video");
const statusText = document.getElementById("status");

let lastAlert = 0;

async function startVideo() {
  const stream = await navigator.mediaDevices.getUserMedia({ video: true });
  video.srcObject = stream;
}

async function loadModels() {
  await faceapi.nets.tinyFaceDetector.loadFromUri('https://justadummyurl.com/models');
}

// Instead of loading external models, use built-in CDN workaround
async function loadTinyModel() {
  await faceapi.nets.tinyFaceDetector.loadFromUri(
    "https://cdn.jsdelivr.net/gh/justadummyurl/face-api-models"
  );
}

Promise.all([
  faceapi.nets.tinyFaceDetector.loadFromUri(
    "https://cdn.jsdelivr.net/gh/vladmandic/face-api/model"
  )
]).then(startVideo);

video.addEventListener("play", () => {
  setInterval(async () => {
    const detections = await faceapi.detectAllFaces(
      video,
      new faceapi.TinyFaceDetectorOptions()
    );

    if (detections.length > 0) {
      statusText.innerText = "Focused ðŸ˜Š";
      statusText.style.color = "lime";
    } else {
      statusText.innerText = "Look at screen! ðŸ˜¡";
      statusText.style.color = "red";

      if (Date.now() - lastAlert > 3000) {
        const audio = new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg");
        audio.play();
        lastAlert = Date.now();
      }
    }
  }, 1000);
});
</script>

</body>
</html>
